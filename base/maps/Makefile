MAPSDIR = .

UFO2MAP = ../../ufo2map

MAPSRCS = $(shell find $(MAPSDIR) -name '*.map' \! -name 'tutorial*' \! -name '*autosave*' \! -name 'prefab*' \! -name 'test*' )
BSPS = $(MAPSRCS:.map=.bsp)

UFO2MAPFLAGS = -nice 19 -extra
FAST_UFO2MAPFLAGS = -nice 19

all: $(BSPS)

fast:
	$(MAKE) all UFO2MAPFLAGS="$(FAST_UFO2MAPFLAGS)"

clean:
	find $(MAPSDIR) -name '*.bsp' | xargs rm

$(BSPS): %.bsp: %.map
	$(UFO2MAP) $(UFO2MAPFLAGS) $<
